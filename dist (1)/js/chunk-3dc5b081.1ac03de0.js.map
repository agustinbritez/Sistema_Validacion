{"version":3,"sources":["webpack:///./src/components/Event/listEvents.vue","webpack:///./src/components/Event/EditEvent.vue","webpack:///./src/components/Event/EditEvent.vue?3d23","webpack:///./src/components/Event/listEvents.vue?fdd0","webpack:///./src/views/Events.vue","webpack:///./src/views/Events.vue?d349"],"names":["class","href","openModalNew","eventsArray","event","key","id","name","description","area_id","Date","startEvent","getDate","getMonth","getFullYear","getHours","getMinutes","endEvent","cantDocument","to","openModalEdit","modalName","modalEdit","activeInput","nameModal","showSelectArea","for","type","data-length","eventEdit","options","areasSelect","label","placeholder","trackBy","searchable","editOrNew","props","String","default","Boolean","components","Multiselect","data","computed","setup","load","methods","getAllAreasOfOwner","cantAreas","areas","index","length","value","push","console","log","M","toast","html","classes","parseInt","state_id","ep","elem","document","getElementById","modalInstance","Modal","getInstance","close","mounted","elems","querySelectorAll","this","inputName","init","inputDescription","selects","CharacterCounter","FormSelect","render","Pagination","EditEvent","Number","pagination","total","current_page","per_page","from","listEvents","ethereum","request","method","accounts","events","getLengthEvents","_area_id","result","getEventsPages","cantEvent","_eventEdit","open","format","fecha","updated"],"mappings":"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","file":"js/chunk-3dc5b081.1ac03de0.js","sourcesContent":["<template>\r\n  <div class=\"\">\r\n    <div class=\"card  \">\r\n      <div class=\"card-title   \">\r\n        <h1 class=\"tile\">Eventos</h1>\r\n        <!-- filter -->\r\n        <div></div>\r\n      </div>\r\n      <div class=\"card-content\">\r\n        <div class=\"row\">\r\n          <button\r\n            class=\"btn left waves-effect waves-light\"\r\n            @click=\"openModalNew()\"\r\n          >\r\n            nuevo (+)\r\n          </button>\r\n        </div>\r\n        <table class=\"highlight centered\">\r\n          <thead>\r\n            <tr>\r\n              <th>ID</th>\r\n              <th>Nombre</th>\r\n              <th class=\"hide-on-med-and-down\">Descripción</th>\r\n              <th>ID Área</th>\r\n              <th>Inicio de Evento</th>\r\n              <th class=\"hide-on-med-and-down\">Fin del Evento</th>\r\n              <th class=\"hide-on-med-and-down\">Cantidad Docs. </th>\r\n              <th>Acción</th>\r\n            </tr>\r\n          </thead>\r\n\r\n          <tbody>\r\n            <tr v-for=\"event in eventsArray\" :key=\"event.id\">\r\n              <td>{{ event.id }}</td>\r\n              <td>{{ event.name }}</td>\r\n              <td class=\"hide-on-med-and-down\">{{ event.description }}</td>\r\n              <td>{{ event.area_id }}</td>\r\n              <td>{{ ((new Date(event.startEvent).getDate())+'/'+(new Date(event.startEvent).getMonth()+1)+'/'+(new Date(event.startEvent).getFullYear())+' '+(new Date(event.startEvent).getHours())+\":\"+(new Date(event.startEvent).getMinutes()) )|| \"undate\" }}</td>\r\n              <td class=\"hide-on-med-and-down\">\r\n                {{  ((new Date(event.endEvent).getDate())+'/'+(new Date(event.endEvent).getMonth()+1)+'/'+(new Date(event.endEvent).getFullYear())+' '+(new Date(event.endEvent).getHours())+\":\"+(new Date(event.endEvent).getMinutes()) ) || \"undate\" }}\r\n              </td>\r\n              <td class=\"hide-on-med-and-down\">{{ event.cantDocument }}</td>\r\n\r\n              <td>\r\n                <div class=\"row right\">\r\n                  <div class=\"col\">\r\n                    <router-link\r\n                      :to=\"{ name: 'EventView', params: { id: event.id } }\"\r\n                      ><i class=\"blue-text text-accent-4 material-icons\"\r\n                        >visibility</i\r\n                      ></router-link\r\n                    >\r\n                    &nbsp;\r\n                  </div>\r\n                  <div class=\"col\">\r\n                    <a\r\n                      href=\"#\"\r\n                      @click.prevent=\"openModalEdit(event)\"\r\n                      class=\"modal-trigger green-text text-accent-4\"\r\n                    >\r\n                      <i class=\"material-icons\">edit</i> </a\r\n                    >&nbsp;\r\n                  </div>\r\n                  <div class=\"col\">\r\n                    <a href=\"#\" class=\"red-text text-accent-4\"\r\n                      ><i class=\"material-icons\">delete_forever</i></a\r\n                    >\r\n                  </div>\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n        <EditEvent\r\n          :modalName=\"modalEdit\"\r\n          :activeInput=\"activeInput\"\r\n          :nameModal=\"nameModal\"\r\n          :showSelectArea=\"showSelectArea\"\r\n        />\r\n      </div>\r\n      <div class=\"card-action   \">\r\n        <Pagination />\r\n      </div>\r\n    </div>\r\n    <br />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { inject, provide, ref, watchEffect } from \"vue\";\r\nimport { mapState } from \"vuex\";\r\nimport Pagination from \"../elements/Pagination.vue\";\r\nimport * as AppWeb3 from \"../../app/app.js\";\r\nimport EditEvent from \"./EditEvent.vue\";\r\n\r\nexport default {\r\n  name: \"listEvents\",\r\n  components: {\r\n    Pagination,\r\n    EditEvent,\r\n  },\r\n  data() {\r\n    return {\r\n      modalEdit: \"modalEdit\",\r\n      // eventEdit: {},\r\n      activeInput: true,\r\n      nameModal: \"\",\r\n      showSelectArea: true,\r\n    };\r\n  },\r\n  props: {\r\n    area_id: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n  },\r\n  setup(props) {\r\n    // const area_id = inject('area_id');\r\n\r\n    const eventEdit = ref({});\r\n    provide(\"eventEdit\", eventEdit);\r\n\r\n    const eventsArray = ref([]);\r\n    provide(\"eventsArray\", eventsArray);\r\n    const pagination = ref({\r\n      total: 0,\r\n      current_page: 1,\r\n      per_page: 1,\r\n      //id elments\r\n      from: 0,\r\n      to: 10,\r\n    });\r\n\r\n    provide(\"pagination\", pagination);\r\n    let load = ref(false);\r\n    provide(\"load\", load);\r\n\r\n    const listEvents = async function () {\r\n      const accounts = await ethereum.request({\r\n        method: \"eth_requestAccounts\",\r\n      });\r\n\r\n      const account = accounts[0];\r\n      let events = await AppWeb3.getAllEvents(\r\n        props.area_id,\r\n        pagination.value.from,\r\n        pagination.value.to\r\n      );\r\n      // console.log(this.account);\r\n      eventsArray.value = events;\r\n      // events.forEach(element => {\r\n      //   console.log(element.name);\r\n\r\n      // });\r\n      return events;\r\n    };\r\n\r\n    // const c= this.listEvents();\r\n    watchEffect(() => {\r\n      console.log(\"watch \" + pagination.value.current_page);\r\n      console.log(\"load \" + load.value);\r\n      listEvents();\r\n    });\r\n\r\n    return { load, eventEdit, listEvents, eventsArray, pagination };\r\n  },\r\n  computed: {\r\n    ...mapState([\"account\"]),\r\n  },\r\n  methods: {\r\n    async getLengthEvents(_area_id) {\r\n      let result = await AppWeb3.getLengthEventsOfArea(_area_id);\r\n      return result;\r\n    },\r\n    async getEventsPages(_area_id) {\r\n      let cantEvent = await this.getLengthEvents(_area_id);\r\n      this.pagination.total = await parseInt(cantEvent / this.pagination.to);\r\n      console.log(\"pagination \" + this.pagination.total);\r\n    },\r\n    openModalEdit(_eventEdit) {\r\n      this.showSelectArea = this.area_id == 0;\r\n      this.eventEdit.name = _eventEdit.name;\r\n      this.eventEdit.id = _eventEdit.id;\r\n      this.eventEdit.area_id = _eventEdit.area_id;\r\n      if (this.area_id > 0) {\r\n        this.eventEdit.area_id = this.area_id;\r\n      }\r\n\r\n      this.eventEdit.description = _eventEdit.description;\r\n      this.eventEdit.startEvent = _eventEdit.startEvent;\r\n      this.eventEdit.endEvent = _eventEdit.endEvent;\r\n      this.eventEdit.state_id = _eventEdit.state_id;\r\n\r\n      var elem = document.getElementById(this.modalEdit);\r\n      // console.log('eventEdit2'+this.eventEdit);\r\n      var modalInstance = M.Modal.getInstance(elem);\r\n      // console.log(modalInstance);\r\n      this.activeInput = true;\r\n      this.nameModal = \"Event Edit\";\r\n      modalInstance.open();\r\n    },\r\n    openModalNew() {\r\n      this.showSelectArea = this.area_id == 0;\r\n      this.eventEdit.name = \"\";\r\n      this.eventEdit.id = 0;\r\n      this.eventEdit.area_id = 0;\r\n      this.eventEdit.state_id = 0;\r\n\r\n      if (this.area_id > 0) {\r\n        this.eventEdit.area_id = this.area_id;\r\n      }\r\n\r\n      this.eventEdit.description = \"\";\r\n      this.eventEdit.startEvent = \"\";\r\n      this.eventEdit.endEvent = \"\";\r\n      var elem = document.getElementById(this.modalEdit);\r\n      // console.log('eventEdit2'+this.eventEdit);\r\n      var modalInstance = M.Modal.getInstance(elem);\r\n      // console.log(modalInstance);\r\n      this.nameModal = \"Event New\";\r\n      this.activeInput = false;\r\n      modalInstance.open();\r\n    },\r\n    format(fecha){\r\n      \r\n    }\r\n  },\r\n  mounted() {\r\n    this.eventsArray = this.listEvents();\r\n    this.getEventsPages(this.area_id);\r\n  },\r\n  updated() {\r\n    // this.listEvents();\r\n  },\r\n};\r\n</script>","<template>\r\n  <div>\r\n    <!-- Modal Structure -->\r\n    <!-- <a class=\"waves-effect waves-light btn modal-trigger\" :href=\"'#'+modalName\"\r\n      >Modal</a\r\n    > -->\r\n\r\n    <!-- Modal Structure -->\r\n    <div :id=\"modalName\" class=\"modal\">\r\n      <div class=\"modal-content\">\r\n        <h5>{{ nameModal }}</h5>\r\n        <hr />\r\n        <div class=\"row\">\r\n          <form class=\"col s12\">\r\n            <div class=\"row\">\r\n              <div class=\"input-field col s6\">\r\n                <input\r\n                  id=\"name\"\r\n                  class=\"inputCounter\"\r\n                  type=\"text\"\r\n                  data-length=\"50\"\r\n                  v-model=\"eventEdit.name\"\r\n                />\r\n                <label for=\"name\" :class=\"{ active: activeInput }\"\r\n                  >Nombre</label\r\n                >\r\n              </div>\r\n              <div class=\"input-field col s6\" v-if=\"showSelectArea\">\r\n                <Multiselect\r\n                  v-model=\"eventEdit.area_id\"\r\n                  :options=\"areasSelect\"\r\n                  label=\"name\"\r\n                  placeholder=\"Seleccionar un Área\"\r\n                  trackBy=\"name\"\r\n                  :searchable=\"true\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"row\">\r\n              <div class=\"input-field col s12\">\r\n                <textarea\r\n                  id=\"description\"\r\n                  class=\"materialize-textarea\"\r\n                  data-length=\"250\"\r\n                  v-model=\"eventEdit.description\"\r\n                ></textarea>\r\n                <label for=\"description\" :class=\"{ active: activeInput }\">\r\n                  Descripción</label\r\n                >\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"row\">\r\n              <div class=\"input-field col s6\">\r\n                <input\r\n                  id=\"startEvent\"\r\n                  type=\"datetime-local\"\r\n                  class=\"form-control\"\r\n                  v-model=\"eventEdit.startEvent\"\r\n                />\r\n                <label for=\"startEvent\" class=\"active\">Inicio del Evento</label>\r\n              </div>\r\n\r\n              <div class=\"input-field col s6\">\r\n                <input\r\n                  id=\"endEvent\"\r\n                  type=\"datetime-local\"\r\n                  class=\"form-control\"\r\n                  v-model=\"eventEdit.endEvent\"\r\n                />\r\n                <label for=\"endEvent\" class=\"active\">Fin del Evento</label>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n      <div class=\"modal-footer\">\r\n        <div class=\"row\">\r\n          <div class=\"col s2\">\r\n            <a\r\n              href=\"#!\"\r\n              @click.prevent=\"editOrNew()\"\r\n              class=\"waves-effect waves-green darken-1 btn-flat\"\r\n              >Save</a\r\n            >\r\n          </div>\r\n          <div class=\"col s2 offset-s6\">\r\n            <a href=\"#!\" class=\"modal-close waves-effect waves-red btn-flat\"\r\n              >Cancel</a\r\n            >\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Multiselect from \"@vueform/multiselect\";\r\nimport * as AppWeb3 from \"../../app/app.js\";\r\nimport { mapState } from \"vuex\";\r\nimport { inject, provide, ref, watchEffect } from \"vue\";\r\n\r\nexport default {\r\n  name: \"EditEvent\",\r\n  props: {\r\n    modalName: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    activeInput: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    activeInput: {\r\n      type: String,\r\n      default: \"Event Edit\",\r\n    },\r\n    showSelectArea: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n  },\r\n  components: { Multiselect },\r\n  data() {\r\n    return {\r\n      areasSelect: [],\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState([\"account\"]),\r\n  },\r\n  setup() {\r\n    const eventEdit = inject(\"eventEdit\");\r\n    const load = inject(\"load\");\r\n\r\n    return { eventEdit, load };\r\n  },\r\n  methods: {\r\n    async getAllAreasOfOwner() {\r\n      let cantAreas = await AppWeb3.getLengthAreaOfOwner();\r\n      let areas = await AppWeb3.getAllAreaOfOwner(0, cantAreas);\r\n\r\n      for (let index = 0; index < areas.length; index++) {\r\n        areas[index].value = areas[index].id;\r\n        this.areasSelect.push(areas[index]);\r\n      }\r\n    },\r\n    async editOrNew() {\r\n      ///if activeInput is false == new event\r\n      console.log(this.eventEdit);\r\n      if (this.eventEdit.startEvent > this.eventEdit.endEvent) {\r\n        M.toast({\r\n          html:\r\n            \"La fecha final del evento no puede ser menor a la fecha de inicio\",\r\n          classes: \"red accent-3\",\r\n        });\r\n        return;\r\n      }\r\n      if (this.activeInput) {\r\n        //edit\r\n\r\n        let ep = await AppWeb3.editEvent(\r\n          this.eventEdit.id,\r\n          this.eventEdit.name,\r\n          this.eventEdit.description,\r\n          this.eventEdit.startEvent,\r\n          this.eventEdit.endEvent,\r\n          parseInt(this.eventEdit.area_id),\r\n          this.eventEdit.state_id\r\n        );\r\n        if (!ep) {\r\n          M.toast({\r\n            html: \"El evento contiene documentos no se puede modificar\",\r\n            classes: \"red accent-3\",\r\n          });\r\n        }\r\n      } else {\r\n        //new\r\n        console.log(this.eventEdit.startEvent);\r\n        await AppWeb3.addEvent(\r\n          parseInt(this.eventEdit.area_id),\r\n          this.eventEdit.name,\r\n          this.eventEdit.description,\r\n          this.eventEdit.startEvent,\r\n          this.eventEdit.endEvent\r\n        );\r\n      }\r\n\r\n      this.load = !this.load;\r\n      var elem = document.getElementById(this.modalName);\r\n      var modalInstance = M.Modal.getInstance(elem);\r\n      modalInstance.close();\r\n    },\r\n  },\r\n  mounted() {\r\n    var elems = document.querySelectorAll(\"#\" + this.modalName);\r\n    // console.log(this.eventEdit.name);\r\n    var instances = M.Modal.init(elems);\r\n    // console.log(instances);\r\n    var inputName = document.getElementById(\"name\");\r\n    var inputDescription = document.getElementById(\"description\");\r\n    var selects = document.querySelectorAll(\".select\");\r\n    M.CharacterCounter.init(inputName);\r\n    M.CharacterCounter.init(inputDescription);\r\n    var selects = M.FormSelect.init(selects);\r\n\r\n    this.getAllAreasOfOwner();\r\n  },\r\n};\r\n</script>\r\n\r\n<style src=\"@vueform/multiselect/themes/default.css\"></style>\r\n\r\n","import { render } from \"./EditEvent.vue?vue&type=template&id=6c283ae5\"\nimport script from \"./EditEvent.vue?vue&type=script&lang=js\"\nexport * from \"./EditEvent.vue?vue&type=script&lang=js\"\n\nimport \"@vueform/multiselect/themes/default.css?vue&type=style&index=0&lang=css\"\nscript.render = render\n\nexport default script","import { render } from \"./listEvents.vue?vue&type=template&id=7f0769fa\"\nimport script from \"./listEvents.vue?vue&type=script&lang=js\"\nexport * from \"./listEvents.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\r\n  <div class=\"container\">\r\n    <listEvents/>\r\n  </div>\r\n</template>\r\n<script>\r\nimport listEvents from \"../components/Event/listEvents.vue\";\r\nexport default {\r\n  name: \"Events\",\r\n  components: {\r\n    listEvents,\r\n  },\r\n};\r\n</script>\r\n\r\n","import { render } from \"./Events.vue?vue&type=template&id=3f5e8646\"\nimport script from \"./Events.vue?vue&type=script&lang=js\"\nexport * from \"./Events.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}